<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>添加新塾员</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="member_management.css">
</head>
<body>
    <div class="container">
        <div class="header-actions">
            <button class="btn btn-primary" onclick="goBack()">
                <i class="fas fa-home"></i> 返回搜索
            </button>
        </div>

        <h1>添加新塾员</h1>

        <div id="errorMessages" class="alert alert-danger" style="display: none;"></div>

        <form id="addMemberForm">
            <fieldset>
                <legend>塾员信息</legend>
                <div class="form-container">

                    <div class="form-group">
                        <label for="Name">姓名（英）<span class="required">*</span></label>
                        <input type="text" id="Name" name="Name" autocomplete="text" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="CName">姓名（中）</label>
                        <input type="text" id="CName" name="CName" autocomplete="text" class="form-control" >
                    </div>

                    <!-- Start Modification -->
                    <div class="form-group">
                        <label for="designation_of_applicant">种类<span class="required">*</span></label>
                        <div class="input-with-button">
                            <select id="designation_of_applicant" name="Designation_of_Applicant" class="form-control" required>
                                <!-- Options will be populated dynamically -->
                                <option value="" disabled selected>请选择或添加</option>
                            </select>
                            <button type="button" id="addApplicantTypeBtn" class="btn btn-secondary btn-add-type tooltip">
                                <i class="fas fa-plus"></i>
                                <span class="tooltip-text">
                                    <strong>核心功能：</strong> 添加新的塾员种类到系统。
                                    <br>
                                    <strong>使用须知：</strong><br>
                                    1.  <strong>点击添加：</strong> 点击此 '+' 按钮打开添加窗口。
                                    <br>
                                    2.  <strong>输入名称：</strong> 在弹出窗口中输入新的种类名称（例如："荣誉塾员"）。
                                    <br>
                                    3.  <strong>保存：</strong> 点击"保存"将新种类永久添加到数据库和此下拉列表中。
                                    <br>
                                    4.  <strong>取消：</strong> 点击"取消"或关闭窗口则不作任何更改。
                                    <br>
                                    <strong>数据影响：</strong> 添加后，新种类将可用于所有塾员记录。请谨慎添加，避免重复或不清晰的分类。
                                </span>
                            </button>
                        </div>
                    </div>
                    <!-- End Modification -->


                    <div class="form-group">
                        <label for="Address">地址</label>
                        <input type="text" id="Address" name="Address" autocomplete="text" class="form-control" >
                    </div>

                    <div class="form-group">
                        <label for="phone_number">手机号码</label>
                        <input type="tel" id="phone_number" name="phone_number" autocomplete="tel"  class="form-control" >
                    </div>

                    <div class="form-group">
                        <label for="email">邮箱</label>
                        <input type="email" id="email" name="email" autocomplete="email" class="form-control" >
                    </div>

                    <div class="form-group">
                        <label for="IC">IC 号码</label>
                        <input type="text" id="IC" name="IC" class="form-control" >
                    </div>

                    <div class="form-group">
                        <label for="oldIC">旧 IC 号码</label>
                        <input type="text" id="oldIC" name="oldIC" autocomplete="text" class="form-control" >
                    </div>

                    <div class="form-group">
                        <label for="gender">性别</label>
                        <select id="gender" name="gender" class="form-control" >
                            <option value=""disabled selected>请选择</option>
                            <option value="male">男</option>
                            <option value="female">女</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="componyName">公司名字</label>
                        <input type="text" id="componyName" name="componyName" class="form-control" autocomplete="text">
                    </div>

                    <div class="form-group">
                        <label for="Birthday">生日</label>

                        <select id="Birthday" name="Birthday" class="form-control">
                            <option value=""disabled selected>请选择月份</option>
                            <option value="1">1月</option>
                            <option value="2">2月</option>
                            <option value="3">3月</option>
                            <option value="4">4月</option>
                            <option value="5">5月</option>
                            <option value="6">6月</option>
                            <option value="7">7月</option>
                            <option value="8">8月</option>
                            <option value="9">9月</option>
                            <option value="10">10月</option>
                            <option value="11">11月</option>
                            <option value="12">12月</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>到期日期 (MM-DD-YYYY):</label>
                        <div class="input-group">
                            <select id="expiredDateOptions" class="form-control">
                                <option value="">请选择</option>
                                <option value="1year">1年</option>
                                <option value="2year">2年</option>
                                <option value="3years">3年</option>
                                <option value="custom">自定年数</option>
                            </select>
                            <input type="date" id="expiredDate" name="expired_date" class="form-control" style="display: none;">

                        </div>
                    </div>

                    <div class="form-group">
                        <label for="place of birth">出生地点</label>
                        <input type="text" id="place_of_birth" name="place_of_birth" autocomplete="text" class="form-control" >
                    </div>

                    <div class="form-group">
                        <label for="position">职位</label>
                        <input type="text" id="position" name="position" autocomplete="text" class="form-control" >
                    </div>

                    <div class="form-group">
                        <label for="others">其他</label>
                        <input type="text" id="others" name="others" autocomplete="text" class="form-control" >
                    </div>

                    <div class="form-group">
                        <label for="remarks">备注</label>
                        <input type="text" id="remarks" name="remarks" autocomplete="text" class="form-control">
                    </div>
                </div>

                <div style="margin-top: 20px;">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> 添加塾员
                    </button>
                </div>
            </fieldset>
        </form>
    </div>

    <div id="loadingIndicator" class="loading-spinner" style="display: none;">
        加载中...
    </div>

    <!-- Start: Add Applicant Type Modal -->
    <div id="addTypeModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>添加新塾员种类</h2>
            <div id="modalErrorMessages" class="alert alert-danger" style="display: none; margin-bottom: 15px;"></div>
            <div class="form-group">
                <label for="newApplicantTypeName">新种类名称:</label>
                <input type="text" id="newApplicantTypeName" class="form-control" placeholder="例如: 十字勋章授予者">
            </div>
            <div class="modal-actions">
                <button type="button" id="saveNewTypeBtn" class="btn btn-primary">
                    <i class="fas fa-save"></i> 保存
                </button>
                <button type="button" id="cancelNewTypeBtn" class="btn btn-secondary">
                    <i class="fas fa-times"></i> 取消
                </button>
            </div>
            <div id="modalLoadingIndicator" class="loading-spinner-small" style="display: none; margin-top: 10px;">保存中...</div>
        </div>
    </div>
    <!-- End: Add Applicant Type Modal -->

    <!-- Confirm Modal -->
    <div id="confirmModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="confirm-icon">
                <i class="fas fa-question-circle"></i>
            </div>
            <h3>确认</h3>
            <p>确定要取消吗？您所作的更改将不会保存。</p>
            <div class="modal-actions">
                <button type="button" class="btn btn-danger" onclick="confirmRedirect()">确认</button>
                <button type="button" class="btn btn-secondary" onclick="hideConfirmModal()">取消</button>
            </div>
        </div>
    </div>
    <!-- End Confirm Modal -->

    <script src="member_management.js"></script>
</body>
</html>
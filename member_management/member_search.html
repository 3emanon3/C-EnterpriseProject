<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Members Management System - Search</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="member_search.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>塾员管理系统</h1>
            <nav class="system-nav">
                <button class="btn btn-primary tooltip" onclick="resetColumnWidths()">
                    <i class="fas fa-arrows-alt-h"></i> 重置列宽
                    <span class="tooltip-text">将表格列宽重置为默认值</span>
                </button>
                <button class="btn btn-primary tooltip" onclick="location.href='../project.html'">
                    <i class="fas fa-home"></i> 返回
                    <span class="tooltip-text">返回到主页面，查看所有系统模块</span>
                </button>
                <button class="btn btn-success tooltip" onclick="location.href='member_management.html'">
                    <i class="fas fa-box"></i> 增加塾员
                    <span class="tooltip-text">添加新塾员到系统中，录入塾员的详细信息</span>
                </button>
              
                <button id="searchBirthday" class="btn btn-info tooltip">
                    <i class="fas fa-birthday-cake"></i> 本月生日
                    <span class="tooltip-text">
                        <strong>核心功能：</strong> 查找并显示所有在本月（当前月份）过生日的塾员。帮助您快速定位当月寿星，以便及时送上祝福或安排相关活动。
                        <br>
                        <strong>使用须知：</strong><br>
                        1.  <strong>筛选依据：</strong> 本功能仅基于塾员信息中记录的“生日月份”与当前的实际月份进行匹配。例如，若当前是 6 月，则会显示所有“生日月份”记录为“6”的塾员。
                        <br>
                        2.  <strong>数据精确性：</strong> 此筛选不关心具体的出生日期（日）或年份，仅以记录的月份数字（1-12）作为唯一匹配条件。
                        <br>
                        3.  <strong>数据完整性：</strong> 请确保塾员的“生日月份”信息已正确录入（应为 1 至 12 的数字）。若该字段为空、格式错误或记录的不是月份数字，对应塾员将无法通过此功能被筛选出来。
                        <br>
                        <strong>补充：词语解释</strong><br>
                        <strong>生日月份：</strong> 塾员信息中用于记录其生日所在月份的栏位。该栏位预期存储的值为 1 至 12 的数字，代表一月至十二月。
                        <br>
                        <strong>当前月份：</strong> 指系统运行时自动获取的服务器或您本地设备的当前日历月份。按钮点击时，系统会使用这个月份值进行匹配查找。
                    </span>
                </button>
                <button id="searchExpiry" class="btn btn-warning tooltip" onclick="openExpiryModal()">
                    <i class="fas fa-calendar-times"></i> 到期塾员 (选择年月)
                    <span class="tooltip-text">
                        <strong>核心功能：</strong> 查找并显示在指定年月或之前到期的塾员。
                        <br>
                        <strong>使用须知：</strong><br>
                        1.  <strong>选择年月：</strong> 点击此按钮后，您需要输入或选择一个目标年份和月份。
                        <br>
                        2.  <strong>筛选逻辑：</strong> 系统将查找所有“到期日期”早于或等于您所选年月最后一天的塾员。例如，选择 2024 年 6 月，将显示到期日在 2024-06-30 及之前的所有塾员。
                        <br>
                        3.  <strong>数据依赖：</strong> 依赖于塾员信息中准确的“到期日期”记录（格式应为 YYYY-MM-DD）。若该字段为空或格式错误，对应塾员可能无法被正确筛选。
                        <br>
                        <strong>补充：词语解释</strong><br>
                        <strong>到期日期：</strong> 记录塾员会籍有效期的最后日期。
                    </span>
                </button>
                <button id="listAllMembers" class="btn btn-secondary tooltip">
                    <i class="fas fa-list"></i> 所有塾员
                    <span class="tooltip-text">显示系统中的所有塾员记录</span>
                </button>
                
                <select id="memberFilter" class="btn btn-light tooltip">
                    <!-- Options will be populated by JavaScript -->
                    <span class="tooltip-text">
                        <strong>核心功能：</strong> 按“种类”筛选名单。允许您选择一个特定的人员类别（例如：塾员、逾期、非塾员），列表将仅显示属于该类别的人员。
                        <br><br>
                        <strong>使用须知：</strong><br>
                        1.  <strong>筛选选项来源：</strong> 可供选择的“种类”列表是根据当前名单中实际包含的所有唯一人员种类自动生成的。名单中有哪些种类，筛选中就会出现哪些选项。
                        <br>
                        2.  <strong>单选限制：</strong> 同一时间只能选择一个“种类”进行筛选。选择新的种类会自动替换掉当前的筛选条件。
                        <br>
                        3.  <strong>操作方式：</strong> 点击此按钮，会展示所有可用的种类选项。点击您想要查看的种类名称即可应用筛选。
                        <br>
                        <strong>补充：词语解释</strong><br>
                        <strong>种类 (Category/Type)：</strong> 指用于标识和区分名单中人员身份、状态或归属的标签。例如，“塾员”通常指正式注册的学员，“逾期”指缴费或状态过期的学员，“非塾员”则包括潜在客户、其他联系人等。具体的种类及其含义由系统设定或数据录入者决定。
                    </span>
                </select>
                
            </nav>
        </header>

        <section class="search-container">
            <div class="search-wrapper">
                <div class="search-input-group">
                    <i class="fas fa-search search-icon"></i>
                    <input 
                        type="text" 
                        id="searchInput" 
                        placeholder="使用ID, 名称," 
                        aria-label="Search stocks">
                </div>
                
            </div>
            <div class="search-stats">
                <span class="stats-label">总数据数量:</span>
                <span id="totalMembers" class="stats-value">0</span>
            </div>
        </section>

        <section class="table-container">
            <div class="loader">
                <div class="spinner"></div>
                <span>Loading stocks...</span>
            </div>
            
            <div class="table-responsive">
                <table id="memberTable" aria-label="Member list">
                    <thead>
                        <tr>
                            <th data-column="membersID">塾员ID<div class="resizer"></div></th>
                            <th data-column="Name">姓名（英）<div class="resizer"></div></th>
                            <th data-column="CName">姓名（中）<div class="resizer"></div></th>
                            <th data-column="Designation_of_Applicant">种类<div class="resizer"></div></th>
                            <th data-column="Address">地址<div class="resizer"></div></th>
                            <th data-column="phone_number">手机号码<div class="resizer"></div></th>
                            <th data-column="email">邮箱<div class="resizer"></div></th>
                            <th data-column="IC">IC 号码<div class="resizer"></div></th>
                            <th data-column="oldIC">旧 IC 号码<div class="resizer"></div></th>
                            <th data-column="gender">性别<div class="resizer"></div></th>
                            <th data-column="componyName">公司名字<div class="resizer"></div></th>
                            <th data-column="Birthday">生日月份<div class="resizer"></div></th>
                            <th data-column="expired_date">到期日期<div class="resizer"></div></th>
                            <th data-column="place_of_birth">出生地点<div class="resizer"></div></th>
                            <th data-column="position">职位<div class="resizer"></div></th>
                            <th data-column="others">其他<div class="resizer"></div></th>
                            <th data-column="remarks">备注<div class="resizer"></div></th>
                            <th class="Action">操作</th>
                           
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dynamic Content -->
                    </tbody>
                </table>
            </div>
            
            <div class="pagination-container">
                <button id="prevPage" class="btn btn-primary">←</button>
                <div class="pagination"></div>
                <button id="nextPage" class="btn btn-primary">→</button>
                <div class="items-per-page">
                    <label for="itemsPerPage">Items per page:</label>
                    <select id="itemsPerPage">
                        <option value="10">10</option>
                        <option value="25">25</option>
                        <option value="50">50</option>
                    </select>
                </div>
            </div>
        </section>
    </div>

    <div id="expiryModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeExpiryModal()">×</span>
            <h2>选择查询的到期年月</h2>
            <p>查找在指定年月或之前到期的塾员。</p>
            <div class="modal-form">
                <label for="expiryYearInput">年份 (YYYY):</label>
                <input type="number" id="expiryYearInput" placeholder="例如: 2024" min="1900" max="2100">
    
                <label for="expiryMonthInput">月份 (1-12):</label>
                <select id="expiryMonthInput">
                    <option value="">--选择月份--</option>
                    <option value="1">1 (一月)</option>
                    <option value="2">2 (二月)</option>
                    <option value="3">3 (三月)</option>
                    <option value="4">4 (四月)</option>
                    <option value="5">5 (五月)</option>
                    <option value="6">6 (六月)</option>
                    <option value="7">7 (七月)</option>
                    <option value="8">8 (八月)</option>
                    <option value="9">9 (九月)</option>
                    <option value="10">10 (十月)</option>
                    <option value="11">11 (十一月)</option>
                    <option value="12">12 (十二月)</option>
                </select>
            </div>
            <div class="modal-actions">
                <button id="confirmExpirySearch" class="btn btn-success">查询</button>
                <button type="button" class="btn btn-secondary" onclick="closeExpiryModal()">取消</button>
            </div>
        </div>
    </div>
    <!-- Modal Overlay -->
    <div id="modalOverlay" class="modal-overlay"></div>

    <script type="module" src="member_search.js"></script>
    
</body>
</html>
